# PHP On Rails —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

![CodeSniffer-PSR-12](https://github.com/IlyaMur/php_on_rails_mvc/workflows/CodeSniffer-PSR-12/badge.svg)
![PHPUnit-Tests](https://github.com/IlyaMur/php_on_rails_mvc/workflows/PHPUnit-Tests/badge.svg)
[![Maintainability](https://api.codeclimate.com/v1/badges/673249eff3f090fe3f06/maintainability)](https://codeclimate.com/github/IlyaMur/php_on_rails_mvc/maintainability)
[![Test Coverage](https://api.codeclimate.com/v1/badges/673249eff3f090fe3f06/test_coverage)](https://codeclimate.com/github/IlyaMur/php_on_rails_mvc/test_coverage)

**[üá¨üáß English readme](https://github.com/IlyaMur/php_on_rails_mvc/blob/master/README_en.md)**

**Table of contents**
  - [–û —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ](#–æ-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
    - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
  - [–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å](#–∫–∞–∫-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
    - [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
    - [–°–∏—Å—Ç–µ–º–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞](#—Å–∏—Å—Ç–µ–º–∞-—Ä–æ—É—Ç–∏–Ω–≥–∞)
    - [–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã](#–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
      - [–≠–∫—à–µ–Ω—ã](#—ç–∫—à–µ–Ω—ã)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
      - [–≠–∫—à–µ–Ω —Ñ–∏–ª—å—Ç—Ä—ã](#—ç–∫—à–µ–Ω-—Ñ–∏–ª—å—Ç—Ä—ã)
    - [–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è](#–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
    - [–ú–æ–¥–µ–ª–∏](#–º–æ–¥–µ–ª–∏)
    - [–û—à–∏–±–∫–∏](#–æ—à–∏–±–∫–∏)

## –û –§—Ä–µ–π–º–æ—Ä–≤–∫–µ
***PHP On Rails*** - MVC-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —è–∑—ã–∫–µ PHP.  
–§—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ–∑–¥–∞–Ω –≤ —Ü–µ–ª—è—Ö –æ–±—É—á–µ–Ω–∏—è, –Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ç–∞–∫–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –æ–ø—Ü–∏–∏, –∫–∞–∫ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞.

–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è —Ü–µ–ª—å - —Å–æ–∑–¥–∞–Ω–∏–µ —Å –Ω—É–ª—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–∞–∑–∏—Ä—É—é—â–µ–≥–æ—Å—è –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–µ –ú–æ–¥–µ–ª—å-–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ-–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.  
–ù–µ —Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ PHP On Rails –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∞–∑–∏—Ä—É—é—â–µ–≥–æ—Å—è –Ω–∞ PHP On Rails –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±–ª–æ–≥ [myPosts](https://github.com/IlyaMur/myposts_app).   
–í –∫–æ—Ç–æ—Ä–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–∏—Å—Ç–µ–º—ã: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ä–∞—Å—Å—ã–ª–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –ø–æ—á—Ç—É, —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ –±–∞–∑–µ AWS S3) –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è, –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞, —Ä–∞–±–æ—Ç—ã —Å —Ö—ç—à—Ç–µ–≥–∞–º–∏, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∏ –¥—Ä—É–≥–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
- –í–µ—Ä—Å–∏—è PHP >= 8.0 (—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è PHP).
- `$ git clone` –¥–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
- `$ make install` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å root –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ public. 
- –í `config/config.php` –≤–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î.

–î–ª—è —á–µ–ª–æ–≤–µ–∫–æ–ø–æ–Ω—è—Ç–Ω—ã—Ö URL –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ rewrite rules —Å–µ—Ä–≤–µ—Ä–∞. [.htaccess](public/.htaccess) —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `public`.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ —Å—Ç–æ—è–ª–∞ —Ü–µ–ª—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ä–µ—à–µ–Ω–∏–π —Å –Ω—É–ª—è.  
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å PHP On Rails:
-  Twig Template Engine.

## –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ñ–∞–π–ª–µ `config/config.php`.

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è:
- –î–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ë–î. 
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫.
- –£—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞/—Å–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫.

–î–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

### –°–∏—Å—Ç–µ–º–∞ –†–æ—É—Ç–∏–Ω–≥–∞ 

[–†–æ—É—Ç–µ—Ä](src/Service/Router.php) —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π URL –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ —ç–∫—à–Ω (–º–µ—Ç–æ–¥) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –ú–∞—Ä—à—Ä—É—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ [—Ñ—Ä–æ–Ω—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä](public/index.php). 

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –º–∞—Ä—à—Ä—É—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —ç–∫—à–µ–Ω `index` –≤ [Home controller](src/Controllers/Home.php).

–†–æ—É—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥–æ–º `add`. –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ —ç–∫—à–µ–Ω–∞: 
```php
// –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ root, –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥ index, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ Home. 
$router->add('', ['controller' => 'Home', 'action' => 'index']);

// –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ posts/index, –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥ index, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ Posts. 
$router->add('posts/index', ['controller' => 'Posts', 'action' => 'index']);
```

–¢–∞–∫ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–∏–±–∫–∏—Ö —Ä–æ—É—Ç–æ–≤, —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ **controller**` –∏ **action**:
```php
// –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–æ—É—Ç–µ—Ä –±—É–¥–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ —ç–∫—à–µ–Ω—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ
$router->add('{controller}/{action}');
```

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ **controller** –∏ **action** –≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±–æ–π –∂–µ–ª–∞–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ—Å—Ç–∞–≤–∏–≤ –µ–≥–æ –≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏, —Ç–∞–∫ –∂–µ –æ–ø—Ä–µ–¥–µ–ª–∏–≤ –¥–ª—è –Ω–µ–≥–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:
```php
// –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–∞—Ä–∞–º–µ—Ç—Ä: id. 
$router->add('{controller}/{id:\d+}/{action}');

// –î–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ—Å—Ç—É —Å –ø–æ–º–æ—â—å—é –µ–≥–æ id. 
$router->add(route: 'posts/{action}/{id:\d+}', params: ['controller' => 'posts']);
```

–î–æ—Å—Ç—É–ø–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–π–º—Å–ø–µ–π—Å–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–æ–±–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "–∞–¥–º–∏–Ω–æ–∫":
```php
// 
$router->add('admin/{controller}/{action}', ['namespace' => 'Admin']);
```

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –∏ —Ç.–¥). –í PHP On Rails –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã - —ç—Ç–æ –∫–ª–∞—Å—Å—ã —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –æ—Ç –∫–ª–∞—Å—Å–∞ –ë–∞–∑–æ–≤–æ–≥–æ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ [src\Controllers\BaseController.php](src/Controllers/BaseController.php)

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/Controllers`. –ö–∞–∫ –æ–±—Ä–∞–∑–µ—Ü –¥–æ—Å—Ç—É–ø–µ–Ω [Home controller](src/Controllers/Home.php).  
–ö–ª–∞—Å—Å—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ–π–º—Å–ø–µ–π—Å–µ `Ilyamur\PhpOnRails\Controllers`.  
–î–æ—Å—Ç—É–ø–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–æ—É—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∏ –∏—Ö –Ω–µ–π–º—Å–ø–µ–π—Å (–æ–ø–∏—Å–∞–Ω–æ –≤ —Å–µ–∫—Ü–∏–∏ [–°–∏—Å—Ç–µ–º–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞](#—Å–∏—Å—Ç–µ–º–∞-—Ä–æ—É—Ç–∏–Ω–≥–∞))

#### –≠–∫—à–µ–Ω—ã
–ö–ª–∞—Å—Å—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç –º–µ—Ç–æ–¥—ã - —ç–∫—à–µ–Ω—ã.  
–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —ç–∫—à–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å **`Action`** –∫ –∏–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞ (–¥–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–∞ –≤—ã–∑–æ–≤–æ–º —ç–∫—à–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ –º–∞–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `__call` –≤ BaseController). –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ [src/Controllers/Home.php](src/Controllers/Home.php), –¥–æ—Å—Ç—É–ø–Ω–æ–º –¥–ª—è –æ–±—Ä–∞–∑—Ü–∞, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —ç–∫—à–µ–Ω `index`  

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –¥–æ—Å—Ç—É–ø–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞ (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä **id**). –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∏–º –≤ —ç–∫—à–µ–Ω–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–≤–æ–π—Å—Ç–≤—É `$this->route_params`

#### –≠–∫—à–µ–Ω —Ñ–∏–ª—å—Ç—Ä—ã

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –º–µ—Ç–æ–¥—ã —Ñ–∏–ª—å—Ç—Ä—ã **before** –∏ **after**. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–æ –∏ –ø–æ—Å–ª–µ **–∫–∞–∂–¥–æ–≥–æ** —ç–∫—à–µ–Ω–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ. 
–í—ã–∑–æ–≤ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω —á–µ—Ä–µ–∑ –º–∞–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `__call` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ [BaseController](src/Controllers/BaseController.php).

–≠–∫—à–µ–Ω —Ñ–∏–ª—å—Ç—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≤–µ—Ä—à–∏–ª –ª–æ–≥–∏–Ω –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —ç–∫—à–µ–Ω.

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–∫—à–µ–Ω —Ñ–∏–ª—å—Ç—Ä–æ–≤ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.  
–î–ª—è **before —Ñ–∏–ª—å—Ç—Ä–∞** –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```php
/**
 * Before —Ñ–∏–ª—å—Ç—Ä. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç false –¥–ª—è –ø—Ä–µ–¥–æ–≤—Ä–∞—â–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—à–µ–Ω–∞ –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–æ–º.
 *
 * @return void
 */
protected function before()
{
}
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ **after filter**:

```php
/**
 * After —Ñ–∏–ª—å—Ç—Ä. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–æ–º —ç–∫—à–µ–Ω–∞.
 *
 * @return void
 */
protected function after()
{
}
```

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ HTML). –í PHP On Rails –æ–Ω–∏ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/Views`.  
–û—Å–Ω–æ–≤–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –≤—ã–±—Ä–∞–Ω —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä [Twig](https://twig.symfony.com/). –í—ã–±–æ—Ä –±—ã–ª —Å–¥–µ–ª–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–¥–æ–±—Å—Ç–≤–∞ –∏ –≥–∏–±–∫–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞.  
Twig –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç XSS) –∏ –ø—Ä–æ—Å—Ç—ã–µ —à–∞–±–ª–æ–Ω—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.  

–î–ª—è —Ä–µ–Ω–¥–µ—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:

```php
BaseView::renderTemplate('Home/index', [
    'name' => 'John Doe',
    'colors' => ['red', 'green', 'blue'],
]);
```

–û–±—Ä–∞–∑–µ—Ü —à–∞–±–ª–æ–Ω–∞ –Ω–∞ Twig –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [src/Views/Home/index.html.twig](src/Views/Home/index.html.twig), –¥–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ [src/Views/base.html.twig](src/Views/base.html.twig).

### –ú–æ–¥–µ–ª–∏

–ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤—è–∑—å —Å –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç—å—é. –í –ú–æ–¥–µ–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞ —Ç–∞–∫ –∂–µ, –∫–∞–∫ —Å–¥–µ–ª–∞–Ω–æ –∏ –≤ PHP On Rails, –≤ –ú–æ–¥–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–∞–∑–æ–π –î–∞–Ω–Ω—ã—Ö. –ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ –æ —Ç–æ–º –∫–∞–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –≤ –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏.  
–í PHP On Rails –º–æ–¥–µ–ª–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–∞ `BaseModel` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç [PDO](http://php.net/manual/ru/book.pdo.php) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î.  
–ú–æ–¥–µ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/Models`. –î–ª—è –æ–±—Ä–∞–∑—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –º–æ–¥–µ–ª—å [src/Models/User.php](src/Models/User.php).

–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é PDO:
```php
$db = static::getDB();
```

### –û—à–∏–±–∫–∏

–ü—Ä–∏ `SHOW_ERRORS` (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `config/config.php`) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –Ω–∞ `true`, –≤ —Å–ª—É—á–∞–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—à–∏–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è. –ï—Å–ª–∏ `SHOW_ERRORS` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞  `false` –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –ª–∏—à—å –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ [src/Views/404.html.twig](src/Views/404.html.twig) –∏–ª–∏ [src/Views/500.html.twig](src/Views/500.html.twig) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—à–∏–±–∫–∏.
